
{% extends "base.html" %}
{% block content %}
<a class="back" href="{{ url_for('index') }}">← Back</a>
<h1>{{ studio['name'] }}</h1>
<p class="muted">{{ studio['description'] }}</p>
<p><strong>{{ studio['price_per_hour']|money }}</strong> per hour · {{ studio['size_sqft'] or "—" }} sq ft</p>

<div class="grid">
  <section>
    <h3>Book this studio</h3>
    <form method="post" action="{{ url_for('book', studio_id=studio['id']) }}" class="form">
      <label>Date
        <input type="date" name="date" value="{{ selected_date.isoformat() }}" required>
      </label>
      <div class="row">
        <label>Start time
          <select name="start_time" required>
            {% for hh in range(8,22) %}{% for mm in (0,30) %}
              <option value="{{ "%02d:%02d"|format(hh,mm) }}">{{ "%02d:%02d"|format(hh,mm) }}</option>
            {% endfor %}{% endfor %}
          </select>
        </label>
        <label>Duration
          <select name="duration">
            <option value="60">1 hour</option>
            <option value="90">1.5 hours</option>
            <option value="120">2 hours</option>
            <option value="180">3 hours</option>
          </select>
        </label>
      </div>
      <label>Full name
        <input type="text" name="full_name" required>
      </label>
      <div class="row">
        <label>Email <input type="email" name="email" required></label>
        <label>Phone <input type="tel" name="phone"></label>
      </div>
      <label>Notes <textarea name="notes" placeholder="Anything we should know?"></textarea></label>
      <button class="btn" type="submit">Request booking</button>
    </form>
  </section>

  <aside>
    <h3>Existing bookings on {{ selected_date.strftime("%b %d, %Y") }}</h3>
    {% if bookings %}
      <ul class="list">
        {% for b in bookings %}
          <li><strong>{{ b['start_time'] }}–{{ b['end_time'] }}</strong> · {{ b['full_name'] }} ({{ b['status'] }})</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No bookings yet for this date.</p>
    {% endif %}
    <p class="muted">Operating hours: 08:00–22:00</p>
  </aside>
</div>
{% endblock %}
